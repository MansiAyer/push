name: 'push'
description: 'pass a script to make changes and push to repo'
author: 'MansiAyer'
branding:
  icon: edit-3
  color: red
inputs:
  #actions_token:
  #  description: 'Actions secret token for authentication'
  #  required: true
  script:
    description: 'Script to make changes. Empty field will only push'
    required: false
runs:
  using: 'ubuntu-latest'
  steps:
    - name: Setup Python
      uses: actions/setup-python@v2
    
    
    #using https://docs.github.com/en/actions/learn-github-actions/reusing-workflows
    #using https://docs.github.com/en/actions/learn-github-actions/contexts#github-context
    #using https://docs.github.com/en/actions/learn-github-actions/environment-variables
    - name: run script and push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        GITHUB_ACTOR: ${GITHUB_ACTOR}
        GITHUB_REPO: ${GITHUB_REPOSITORY}
      run: |
        git clone https://${GITHUB_ACTOR}:${GITHUB_TOKEN}@github.com/${GITHUB_REPOSITORY}/
        cd ${GITHUB_ACTOR}/update/ 
        python main.py ${GITHUB_TOKEN}
        cd ..
        git config user.name "${GITHUB_ACTOR}"
        git config user.email "42694815+${GITHUB_ACTOR}@users.noreply.github.com"
        git add .
        git commit -m "updating readme stars"
        git push
        
    





